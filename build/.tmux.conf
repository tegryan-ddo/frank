# Frank tmux configuration for persistent web terminal sessions

# Large scrollback buffer
set -g history-limit 5000000

# Mouse support enabled for scrollback navigation
# Copy/paste: mouse drag selects text and copies to clipboard via OSC 52
# Fallback: press Ctrl-B then m to toggle mouse off, select text normally, then toggle back
set -g mouse on

# OSC 52 clipboard integration - sends copied text to browser clipboard
# This allows tmux copy-mode selections to reach the browser via xterm.js
set -s set-clipboard on
set -as terminal-features ',screen-256color:clipboard'

# When mouse drag ends in copy-mode, copy selection and exit copy-mode
# This makes select-by-drag automatically copy to clipboard
bind-key -T copy-mode MouseDragEnd1Pane send-keys -X copy-selection-and-cancel
bind-key -T copy-mode-vi MouseDragEnd1Pane send-keys -X copy-selection-and-cancel

# Toggle mouse mode with Ctrl-B m (useful when OSC 52 clipboard doesn't work)
bind-key m set-option -g mouse \; display-message "Mouse mode: #{?mouse,ON,OFF}"

# Don't rename windows automatically
set -g allow-rename off

# Keep session alive when the last client detaches
set -g destroy-unattached off

# Set terminal to support 256 colors
set -g default-terminal "screen-256color"

# Allow passthrough of escape sequences (for clickable links, colors, etc.)
set -g allow-passthrough on

# Reduce escape time for better responsiveness
set -sg escape-time 10

# Don't wrap long lines in a way that breaks URLs
set -g wrap-search on

# Status bar - minimal since web UI has its own status panel
set -g status off
